# TypeScript Imports Status

**Last Updated:** December 2024

## Overview

This document tracks the status of TypeScript import paths in the mathjs codebase. All internal TypeScript files now correctly import from `.ts` files rather than `.js` files.

## Import Fix Summary

- **Total imports fixed:** ~1,993 imports across all TypeScript files
- **Files affected:** All `.ts` files in `src/` directory
- **Status:** COMPLETE

### Key Files Updated

| File | Imports Fixed |
|------|---------------|
| `src/factoriesAny.ts` | ~301 |
| `src/factoriesNumber.ts` | ~117 |
| `src/expression/embeddedDocs/embeddedDocs.ts` | ~253 |
| `src/defaultInstance.ts` | 2 |
| All other `.ts` files | ~1,320 |

## Intentional .js Imports (Do Not Convert)

The following imports intentionally reference `.js` files and should NOT be converted to `.ts`:

### 1. External npm Packages

These are npm package names, not file paths:

```typescript
import Decimal from 'decimal.js'
import ComplexJS from 'complex.js'
import FractionJS from 'fraction.js'
```

**Files using these:**
- `src/type/bignumber/BigNumber.ts`
- `src/type/bignumber/function/bignumber.ts`
- `src/type/complex/Complex.ts`
- `src/type/fraction/Fraction.ts`
- `src/type/boolean.ts`
- `src/type/matrix/function/index.ts`
- `src/plain/bignumber/index.ts`
- `src/function/arithmetic/floor.ts`
- `src/function/arithmetic/ceil.ts`

### 2. External Type Definitions

References to the external `types/` directory (outside `src/`):

```typescript
import type { MathJsStatic } from '../../../types/index.js'
import type { MathArray, Matrix } from '../../../types/index.js'
import type { MathJsChain } from '../../../types/index.js'
```

**Files using these:**
- `src/type/unit/Unit.ts`
- `src/type/fraction/Fraction.ts`
- `src/utils/node.ts`
- `src/types.ts`
- `src/expression/function/compile.ts`
- `src/expression/function/evaluate.ts`
- `src/function/bitwise/*.ts` (7 files)
- `src/function/set/*.ts` (10 files)
- `src/function/unit/to.ts`

### 3. Auto-Generated Files

Generated by the build system and should remain as `.js`:

```typescript
export * from './pureFunctionsAny.generated.js'
export * from './impureFunctionsAny.generated.js'
export * from './dependenciesAny.generated.js'
export * from './pureFunctionsNumber.generated.js'
export * from './impureFunctionsNumber.generated.js'
export * from './dependenciesNumber.generated.js'
```

**Files using these:**
- `src/entry/mainAny.ts`
- `src/entry/mainNumber.ts`

## Source File Coverage

All JavaScript files in `src/` have corresponding TypeScript files:

| Metric | Count |
|--------|-------|
| JavaScript files in src/ | 673 |
| TypeScript files in src/ | 685 |
| JS files without TS counterpart | 0 |

This indicates the TypeScript migration is complete for source file creation. The remaining JavaScript files exist alongside their TypeScript counterparts during the transition period.

## Verification

To verify all internal imports use `.ts` extensions:

```bash
# Check for .js imports (should only show external deps and generated files)
grep -r "from '.*\.js'" src/ --include="*.ts" | grep -v "decimal.js\|complex.js\|fraction.js\|types/index.js\|.generated.js"
```

Expected output: empty (no results)

## Next Steps

1. **Remove duplicate JS files:** Once TypeScript compilation is stable, the original `.js` files can be removed
2. **Update build system:** Ensure the build generates `.js` output from `.ts` sources
3. **Type definitions:** Consider converting `types/index.js` references once the type system is fully migrated
